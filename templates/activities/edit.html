{% extends 'base.html' %}

{% block title %}Edit {{ subcategory_name }} - Academic Achievement Summarizer{% endblock %}

{% block page_title %}Edit {{ subcategory_name }}{% endblock %}

{% block content %}
<h1>Edit {{ subcategory_name }}</h1>
<p>
    For: <strong>{{ faculty.display_name }}</strong> |
    Category: <strong>{{ category_name }}</strong> |
    AY {{ academic_year.year_code }}
</p>
<p><a href="{% url 'faculty_activities' faculty.email %}?year={{ academic_year.year_code }}">Back to Activities</a></p>

<div class="card">
    <form method="post">
        {% csrf_token %}

        {% for field in fields %}
        <div class="form-group">
            <label for="{{ field.key }}">{{ field.label }}</label>
            {% if 'date' in field.key|lower %}
            <input type="date" name="{{ field.key }}" id="{{ field.key }}" value="{{ field.value }}">
            {% elif 'title' in field.key|lower or 'name' in field.key|lower %}
            <input type="text" name="{{ field.key }}" id="{{ field.key }}" value="{{ field.value }}" style="width: 100%;">
            {% else %}
            <input type="text" name="{{ field.key }}" id="{{ field.key }}" value="{{ field.value }}">
            {% endif %}
        </div>
        {% endfor %}

        <div class="form-group">
            <label for="points">Points</label>
            <input type="number" name="points" id="points" min="0" value="{{ entry.points|default:0 }}" required>
            <p style="font-size: 12px; color: #666;">Enter the point value for this activity</p>
        </div>

        <button type="submit" class="btn btn-success">Save Changes</button>
        <a href="{% url 'faculty_activities' faculty.email %}?year={{ academic_year.year_code }}" class="btn btn-secondary">Cancel</a>
    </form>
</div>

<div class="card" style="margin-top: 20px; border-color: #e74c3c;">
    <h3 style="color: #e74c3c;">Delete Activity</h3>
    <p>Permanently remove this activity entry.</p>
    <form method="post" action="{% url 'delete_activity' faculty.email category subcategory index %}" onsubmit="return confirm('Are you sure you want to delete this activity?');">
        {% csrf_token %}
        <input type="hidden" name="year_code" value="{{ academic_year.year_code }}">
        <button type="submit" class="btn" style="background: #e74c3c; color: white;">Delete Activity</button>
    </form>
</div>
{% endblock %}
